<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ page.title }} | Blog Culinaire</title>
    <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}" />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <style>
      .site-return {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 10px 20px;
        background-color: #2c3e50;
        color: white;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        text-decoration: none;
        transition: all 0.3s ease;
        z-index: 1000;
        display: flex;
        align-items: center;
        gap: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      .site-return:hover {
        background-color: #34495e;
        transform: translateY(-2px);
      }
      .site-return i {
        font-size: 0.9em;
      }
      @media (max-width: 768px) {
        .site-return {
          top: 10px;
          right: 10px;
          padding: 8px 15px;
          font-size: 0.9em;
        }
      }
    </style>
  </head>
  <body>
    <header class="hero" style="background-image: url('/images/header.jpg');">
      <div class="hero-overlay">
        <h1>Blog Culinaire Sherbrooke</h1>
        <p class="tagline">Nos critiques honnêtes de restaurants à Sherbrooke – pour les amoureux de bonne bouffe</p>
        <div class="social-links">
          <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
          <a href="#" class="social-link"><i class="fab fa-facebook"></i></a>
          <a href="#" class="social-link"><i class="fab fa-youtube"></i></a>
        </div>
      </div>
      <a href="javascript:void(0)" class="admin-button" id="login-button">
        <i class="fas fa-user"></i>
        <span>Connexion</span>
      </a>
      <a href="/" class="site-return">
        <i class="fas fa-arrow-left"></i>
        <span>Retour au site</span>
      </a>
    </header>

    <nav class="main-nav-container">
      <ul>
        <li><a href="{{ '/' | relative_url }}">Accueil</a></li>
        <li><a href="{{ '/about/' | relative_url }}">À propos</a></li>
        <li><a href="{{ '/a-venir/' | relative_url }}">À venir</a></li>
      </ul>
    </nav>

    <main class="container">
      {{ content }}
    </main>

    <footer>
      <div class="footer-content">
        <div class="footer-section">
          <h3><a href="{{ '/about/' | relative_url }}" class="footer-link">À propos de nous</a></h3>
          <p>Deux passionnés de gastronomie qui partagent leurs découvertes culinaires à Sherbrooke.</p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>Blog culinaire © 2025 – Fait avec ❤️ par Nataël & Nicolas</p>
      </div>
    </footer>

    <button id="scroll-to-top" class="scroll-to-top">
      <i class="fas fa-arrow-up"></i>
    </button>

    <script>
      if (window.netlifyIdentity) {
        const loginButton = document.getElementById('login-button');
        
        window.netlifyIdentity.on("init", user => {
          if (user) {
            loginButton.innerHTML = '<i class="fas fa-user"></i><span>Admin</span>';
            loginButton.onclick = () => {
              window.location.href = '/admin/';
              return false;
            };
          } else {
            loginButton.innerHTML = '<i class="fas fa-user"></i><span>Connexion</span>';
            loginButton.onclick = () => {
              window.netlifyIdentity.open();
              return false;
            };
          }
        });

        window.netlifyIdentity.on("login", () => {
          loginButton.innerHTML = '<i class="fas fa-user"></i><span>Admin</span>';
          loginButton.onclick = () => {
            window.location.href = '/admin/';
            return false;
          };
        });

        window.netlifyIdentity.on("logout", () => {
          loginButton.innerHTML = '<i class="fas fa-user"></i><span>Connexion</span>';
          loginButton.onclick = () => {
            window.netlifyIdentity.open();
            return false;
          };
          window.location.href = "/";
        });
      }

      // Scroll to top functionality
      const scrollToTopButton = document.getElementById('scroll-to-top');
      
      window.addEventListener('scroll', () => {
        if (window.pageYOffset > 300) {
          scrollToTopButton.classList.add('show');
        } else {
          scrollToTopButton.classList.remove('show');
        }
      });

      scrollToTopButton.addEventListener('click', () => {
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      });
    </script>
  </body>
</html>
